<div id="profilepages">
  <!-- PROFILE -->
    <div class="profile-infos-card d-flex flex-column justify-content-center " >
      <div class="d-flex justify-content-center">
          <%= cl_image_tag @user.avatar.key, class: "user-avatar", alt: "User Avatar" %>
      </div>
      <div class="d-flex justify-content-center">
        <p class= "hello-name-profile"> Hello <%= @user.username %> ! </p>
      </div>
        <div class="d-flex justify-content-center">
          <p>  <i class="fa-solid fa-user-plus fa-fade fa-xl" style="color: #cbbc45;"></i>        <%= @user.xp%>  XP </p>
          <p class="px-5"> <i class="fa-solid fa-rocket fa-fade fa-xl" style="color: #cbbc45;"></i>       <%= @user.level %></p>
          <p> <i class="fa-solid fa-trophy fa-fade fa-xl" style="color: #cbbc45;"></i>        <%= @user.reward %></p>
        </div>
      <%# Calendar %>
    </div>
  
  <!-- FAVORITES -->
  <div class="profil-videos-container">
    <h3 class="title-profil-video">Favorites</h3>
    <div>
      <div class="scrolling-wrapper d-flex">
        <% @favorites.each do |favorite| %>
          <div class="s-card">
            <div class="s-card-media">
              <iframe width="350" height="250" src="<%= favorite.lesson.video_url %>" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
            </div>
            <div class="card-bottom-main-div">
              <div class="card-bottom-left-div">
                <span class="title-card-profile" ><%= link_to favorite.lesson.name, lesson_path(favorite.lesson) %> </span>
                <br>
                <span class="custom-subtext-card">
                  <%= favorite.lesson.start_time.strftime('%d %b') %> -
                    <span class="custom-subtext-card"><%= favorite.lesson.duration %> min</span>
                  </span>
                </div>
                <div class="card-bottom-right-div" data-controller="popover" data-bs-toggle="popover" data-bs-trigger="hover" data-bs-placement="bottom" title="" data-bs-content="Do you want to delete this favorite?">
                  <%= button_to favorite_path(favorite), method: :delete, form_class: 'delete-alertbox', class: 'd-inline', class: 'no-border-sweet-alert' do %>
                    <i class="fa-solid fa-trash fa-lg" style="color: #000000;"></i>
                  <% end %>
                </div>
              </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>


  <br>

  <!-- HISTORY -->
  <div class="profil-videos-container">
    <h3 class="title-profil-video">History</h3>
    <div>
      <div class="scrolling-wrapper d-flex">
          <% @lessons.each do |lesson| %>
            <div class="s-card">
              <div class="s-card-media">
                <iframe width="350" height="250" src="<%= lesson.video_url %>" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
              </div>
              <div class="card-bottom-main-div">
                <div class="card-bottom-left-div">
                  <span class="title-card-profile" ><%= link_to lesson.name, lesson_path(lesson) %> </span>
                  <br>
                  <span class="custom-subtext-card">
                    <%= lesson.created_at.strftime('%d %b') %> -
                    <span class="custom-subtext-card"><%= lesson.duration %> min</span>
                  </span>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>


  <div class="button-profile mt-5 mb-4 ">
    <%= link_to "Home", root_path, class: "green-btn" %>
  </div>
</div>
